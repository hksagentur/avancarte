{% set services = sections[lang].services|default([]) %}

{% macro summary(item, index=1) %}
  {% set odd = (index % 2 != 0) %}
  {% set even = (index % 2 == 0) %}

  {% if odd and item.image %}
    {{ figure(item.image, "figure-" ~ index) }}
  {% endif %}

  <article class="c-summary / u-bg-concrete">
    <h3 class="c-summary__title / u-divide-y">
      {{ item.title }}
    </h3>
    <div class="c-summary__excerpt">
      <p>
        {{ item.summary|striptags|escape|nl2br|safe }}
      </p>
    </div>
    {% if item.more %}
      <a href="{{ item.more.url }}" class="c-more"{% if item.more.alt %} aria-label="{{ item.more.alt|format(item.title) }}"{% endif %}>
        {{ item.more.label }}
      </a>
    {% endif %}
  </article>

  {% if even and item.image %}
    {{ figure(item.image, "figure-" ~ index) }}
  {% endif %}
{% endmacro %}

{% macro figure(image) %}
  <figure class="c-figure">
    <img
      class="c-figure__content / u-object-cover"
      src="{{ image.url|default(image) }}"
      alt="{{ image.alt }}"
    >
    {% if image.caption %}
      <figcaption class="c-figure__caption">
        {{ image.caption }}
      </figcaption>
    {% endif %}
  </figure>
{% endmacro %}

{% if services|length %}
  <section class="c-section c-section--services">
    <h2 class="c-section__title">
      {{ "Merchandise presentation"|trans }}
    </h2>

    <div class="o-grid o-grid--flush o-grid--columns-2">
      {% for item in services %}
        {{ summary(item, loop.index) }}
      {% endfor %}
    </div>
  </section>
{% endif %}
